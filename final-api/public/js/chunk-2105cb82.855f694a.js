(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2105cb82"],{1242:function(t,e,a){"use strict";a("b71f")},"317f":function(t,e,a){"use strict";a("6fe5")},"343c":function(t,e,a){"use strict";a("a0b0")},"566e":function(t,e,a){"use strict";var r=a("e99b"),n=a("e9aa")(1);r(r.P+r.F*!a("95b6")([].map,!0),"Array",{map:function(t){return n(this,t,arguments[1])}})},"6fe5":function(t,e,a){},9231:function(t,e,a){"use strict";a("ebc9")},a0b0:function(t,e,a){},a450:function(t,e,a){var r=a("bb8b").f,n=Function.prototype,l=/^\s*function ([^ (]*)/,i="name";i in n||a("26df")&&r(n,i,{configurable:!0,get:function(){try{return(""+this).match(l)[1]}catch(t){return""}}})},b71f:function(t,e,a){},c05d:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-tabs",{attrs:{type:"border-card"},on:{"tab-click":t.onChangeTab},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{name:"createBill"}},[a("span",{attrs:{slot:"label"},slot:"label"},[a("i",{staticClass:"el-icon-date"}),t._v(" New Bill")]),a("CreateBill",{ref:"refCreateBill",attrs:{"chart-data":t.chartData},on:{"refresh-data":t.getBillChartData}})],1),a("el-tab-pane",{attrs:{name:"billList"}},[a("span",{attrs:{slot:"label"},slot:"label"},[a("i",{staticClass:"el-icon-date"}),t._v(" All Bills")]),a("BillList",{ref:"refBillList",attrs:{"chart-data":t.chartData},on:{"refresh-data":t.getBillChartData}})],1)],1)],1)},n=[],l=(a("32ea"),a("94f0"),a("4890"),a("df84"),a("ac67"),a("1bc7"),a("7dd6")),i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"layout"},[a("div",{staticClass:"left-container"},[a("el-form",{ref:"newBillForm",staticClass:"input-container",attrs:{model:t.newBillForm,rules:t.rules,"label-width":"100px","label-position":"left"}},[a("el-form-item",{staticClass:"input-box",attrs:{label:"Date",prop:"date"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"Please select date",size:"small"},model:{value:t.newBillForm.date,callback:function(e){t.$set(t.newBillForm,"date",e)},expression:"newBillForm.date"}})],1),a("el-form-item",{staticClass:"input-box",attrs:{label:"Food",prop:"food"}},[a("el-input",{attrs:{size:"small"},model:{value:t.newBillForm.food,callback:function(e){t.$set(t.newBillForm,"food",t._n(e))},expression:"newBillForm.food"}})],1),a("el-form-item",{staticClass:"input-box",attrs:{label:"Entertainment",prop:"entertainment"}},[a("el-input",{attrs:{size:"small"},model:{value:t.newBillForm.entertainment,callback:function(e){t.$set(t.newBillForm,"entertainment",t._n(e))},expression:"newBillForm.entertainment"}})],1),a("el-form-item",{staticClass:"input-box",attrs:{label:"Transition",prop:"transition"}},[a("el-input",{attrs:{size:"small"},model:{value:t.newBillForm.transition,callback:function(e){t.$set(t.newBillForm,"transition",t._n(e))},expression:"newBillForm.transition"}})],1),a("el-form-item",{staticClass:"input-box",attrs:{label:"Other",prop:"other"}},[a("el-input",{attrs:{size:"small"},model:{value:t.newBillForm.other,callback:function(e){t.$set(t.newBillForm,"other",t._n(e))},expression:"newBillForm.other"}})],1),a("el-form-item",{staticClass:"input-box",attrs:{label:"Note",prop:"note"}},[a("el-input",{attrs:{size:"small"},model:{value:t.newBillForm.note,callback:function(e){t.$set(t.newBillForm,"note",e)},expression:"newBillForm.note"}})],1)],1),a("div",[a("el-button",{staticStyle:{width:"100px"},attrs:{type:"prime",icon:"el-icon-circle-plus-outline",round:""},on:{click:t.onCreatBill}},[t._v("add")]),a("el-popover",{attrs:{placement:"top-start",width:"250",trigger:"hover",content:"Each click of the button will randomly generate 10 records"}},[a("el-button",{attrs:{slot:"reference",type:"prime"},on:{click:t.onAddTestData},slot:"reference"},[t._v("Click To Add Test Data")])],1)],1)],1),a("div",{staticClass:"right-container"},[a("div",{staticClass:"select-container"},[a("el-select",{attrs:{placeholder:"time frame",size:"small"},on:{change:t.onChangeTimeFrame},model:{value:t.timeFrame,callback:function(e){t.timeFrame=e},expression:"timeFrame"}},t._l(t.timeFrameOptions,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1),a("el-select",{attrs:{placeholder:"chart type",size:"small"},on:{change:t.onChangeType},model:{value:t.chartType,callback:function(e){t.chartType=e},expression:"chartType"}},t._l(t.chartTypeoptions,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),a("div",{ref:"chartContainer",staticClass:"chartContainer"})])])},o=[],s=(a("a450"),a("58c8"));a("566e"),a("9244"),a("25ba");function c(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,r)}return a}function u(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?c(Object(a),!0).forEach((function(e){Object(l["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):c(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var m={name:"CreateBill",props:{chartData:{default:function(){},type:Array}},data:function(){return{myChart:null,names:["food","entertainment","transition","other","total"],newBillForm:{date:"",food:0,entertainment:0,transition:0,other:0,note:""},timeFrameOptions:[{value:"week",label:"LAST WEEK"},{value:"month",label:"LAST MONTH"},{value:"year",label:"LAST YEAR"}],chartTypeoptions:[{value:"line",label:"LINE CHART"},{value:"bar",label:"BAR CHART"},{value:"stack",label:"STACK CHART"}],timeFrame:"week",chartType:"line",rules:{date:[{type:"date",required:!0,message:"Please select date",trigger:"change"}],food:[{type:"number",message:"Must be Number",trigger:"change"}],entertainment:[{type:"number",message:"Must be Number",trigger:"change"}],transition:[{type:"number",message:"Must be Number",trigger:"change"}],other:[{type:"number",message:"Must be Number",trigger:"change"}]}}},mounted:function(){this.myChart=this.$echarts.init(this.$refs.chartContainer)},methods:{onAddTestData:function(){var t=this,e=this.$store.state.userId,a=function(t,e){return e?Math.random()*(e-t)+t:Math.round(Math.random()*t)},r=(new Date).getTime(),n=r-10368e6,l=Object(s["a"])(Array(10).keys()).map((function(l,i){return{userId:e,date:t.$moment(a(n,r)).format("YYYY-MM-DD"),food:a(100),entertainment:a(100),transition:a(100),other:a(100),note:"This is a random record ".concat(i)}}));this.API.newBill(l).then((function(){t.$message({message:"success!",type:"success"}),t.$refs.newBillForm.resetFields(),t.onChangeTimeFrame("week")}))},onCreatBill:function(){var t=this;this.$refs.newBillForm.validate((function(e){if(!e)return!1;var a=t.$store.state.userId;a?t.API.newBill(u(u({userId:a},t.newBillForm),{},{date:t.$moment(t.newBillForm.date).format("YYYY-MM-DD")})).then((function(){t.$message({message:"success!",type:"success"}),t.$refs.newBillForm.resetFields(),t.onChangeTimeFrame("week")})):t.$message.error("please login")}))},setChart:function(t){var e=t&&t.type,a=Object(s["a"])(this.names);e||(e="line"),"stack"!==e&&"bar"!==e||a.pop();var r=[],n=a.map((function(t,a){return{name:t,type:"stack"===e?"bar":e,stack:"stack",data:[]}}));this.chartData.forEach((function(t,a){r.push(t.date),n.forEach((function(r,n){r.data.push(t[r.name]),r.stack="stack"===e?"stack":a+""+r.name+n}))}));var l={title:{text:""},tooltip:{},series:n,legend:{data:a},yAxis:{},xAxis:{data:r}};this.myChart.clear(),this.myChart.setOption(l)},onChangeTimeFrame:function(t){var e=0,a=(new Date).getFullYear(),r=(new Date).getMonth()+1,n=(new Date).getDate();"week"===t?e=(new Date).getTime()-6048e5:"month"===t?e=new Date(a+"-"+(r-1)+"-"+n).getTime():"year"===t&&(e=new Date(a-1+"-"+r+"-"+n).getTime()),this.$emit("refresh-data",{dateTs:e})},onChangeType:function(t){this.setChart({type:t})}}},p=m,h=(a("317f"),a("9231"),a("5d22")),f=Object(h["a"])(p,i,o,!1,null,"3d7fbd20",null),b=f.exports,d=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"layout"},[a("div",{staticClass:"left-container"},[a("el-table",{staticStyle:{width:"100%",height:"100%"},attrs:{data:t.tableData}},[a("el-table-column",{attrs:{prop:"date",label:"Date"}}),a("el-table-column",{attrs:{prop:"food",label:"Food"}}),a("el-table-column",{attrs:{prop:"entertainment",label:"Entertainment"}}),a("el-table-column",{attrs:{prop:"transition",label:"Transition"}}),a("el-table-column",{attrs:{prop:"other",label:"Other"}}),a("el-table-column",{attrs:{prop:"total",label:"Total"}}),a("el-table-column",{attrs:{prop:"note",label:"Note"}}),a("el-table-column",{attrs:{label:"Operation",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"}},[t._v("View")]),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.onDetail(e.row)}}},[t._v("Detail")]),a("el-button",{attrs:{type:"text",size:"small"}},[t._v("Edit")])]}}])})],1)],1),a("div",{staticClass:"right-container"},[a("div",{ref:"chartContainer",staticClass:"chartContainer"})])])},y=[];function v(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,r)}return a}function g(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?v(Object(a),!0).forEach((function(e){Object(l["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):v(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var w={name:"BillList",props:{chartData:{default:function(){},type:Array}},data:function(){return{myChart:null,tableData:[],dataMap:{}}},watch:{chartData:{handler:function(t,e){var a=this;this.tableData=t.map((function(t){return t&&(a.dataMap[t._id]=g({},t)),g({},t)})),this.setChart()},deep:!0}},mounted:function(){var t=this;this.myChart=this.$echarts.init(this.$refs.chartContainer),this.tableData=this.chartData.map((function(e){return e&&(t.dataMap[e._id]=g({},e)),g({},e)}))},methods:{onDetail:function(t){this.setChart(t._id)},setChart:function(t){t||(t=this.chartData[0]._id);var e=this.dataMap[t],a=[{value:e.food,name:"Food"},{value:e.entertainment,name:"Entertainment"},{value:e.transition,name:"Transition"},{value:e.other,name:"Other"}];this.myChart.clear(),this.myChart.setOption({title:{text:"Bill On ".concat(e.date),left:"center",top:20,textStyle:{color:"#ccc"}},tooltip:{trigger:"item"},legend:{orient:"vertical",left:20,top:20,bottom:20},series:[{name:"",type:"pie",avoidLabelOverlap:!1,label:{show:!1,position:"center"},data:a}]})}}},O=w,C=(a("1242"),a("343c"),Object(h["a"])(O,d,y,!1,null,"258cdd31",null)),B=C.exports;function D(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,r)}return a}function F(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?D(Object(a),!0).forEach((function(e){Object(l["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):D(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var j={name:"Bill",components:{CreateBill:b,BillList:B},data:function(){return{chartData:[],activeName:"createBill"}},mounted:function(){this.getBillChartData({dateTs:(new Date).getTime()-6048e5})},methods:{getBillChartData:function(t){var e=this,a=this.$store.state.userId;a?this.API.getBillChart(F({userId:a},t)).then((function(t){e.chartData=t.data,e.$nextTick((function(){e.onChangeTab()}))})):this.$message.error("please login")},onChangeTab:function(){"createBill"===this.activeName?this.$refs.refCreateBill.setChart():"billList"===this.activeName&&this.$refs.refBillList.setChart()}}},k=j,T=Object(h["a"])(k,r,n,!1,null,"5738c741",null);e["default"]=T.exports},ebc9:function(t,e,a){}}]);
//# sourceMappingURL=chunk-2105cb82.855f694a.js.map